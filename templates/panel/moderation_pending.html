{include file="global/header.html"}

    <main class="gallery-container-view">
        <div class="gallery-item-view moderation-layout">
            <div class="gallery-left-side">
                <div class="gallery-details-view moderation-menu">
{include file="panel/moderation_menu.html"}
                </div>
            </div>

            <div class="gallery-image-wrapper moderation-dashboard">
                <h2>Moderation Dashboard - Pending Images</h2>

                <div class="dashboard-content-wrapper">
                    <div class="dashboard-comparison-wrapper pending-images-wrapper">

                    {if $pending_count > 0}
                        <table class="pending-images-table">
                            <thead>
                                <tr>
                                    <th>Image Hash</th>
                                    <th>Image Uploader</th>
                                    <th>Upload Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {foreach $pending_rows as list($image_hash, $username, $created_at)}
                                <tr>
                                    <td>{$image_hash}</td>
                                    <td>{ucfirst($username)}</td>
                                    <td>{$created_at}</td>
                                    <td>
                                        <span class="hover-preview">
                                            <button class="btn-view" title="View Image">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>

                                            <span class="hover-preview-box">
                                                <a href="/moderation/image-pending/{$image_hash}">
                                                    <img src="/moderation/image-pending/{$image_hash}" alt="Preview">
                                                </a>
                                            </span>
                                        </span>                                

                                        <button class="btn-edit" title="Edit Image"><i class="fa-solid fa-pen"></i></button>

                                        <form method="POST" action="/moderation/image-pending/approve/{$image_hash}" style="display:inline;">
                                            <input type="hidden" name="csrf_token" value="{$csrf_token}">
                                            <button type="submit" class="btn-approve" title="Approve Image"><i class="fa-solid fa-check"></i></button>
                                        </form>

                                        <form method="POST" action="/moderation/image-pending/approve/sensitive/{$image_hash}" style="display:inline;" onsubmit="return confirm('Mark this image as sensitive?');">
                                            <input type="hidden" name="csrf_token" value="{$csrf_token}">
                                            <button type="submit" class="btn-warning" title="Approve Sensitive Image"><i class="fa-solid fa-exclamation"></i></button>
                                        </form>

                                        <form method="POST" action="/moderation/image-pending/reject/{$image_hash}" style="display:inline;" onsubmit="return confirm('Reject this image?');">
                                            <input type="hidden" name="csrf_token" value="{$csrf_token}">
                                            <button type="submit" class="btn-reject" title="Reject Image"><i class="fa-solid fa-xmark"></i></button>
                                        </form>
                                    </td>
                                </tr>
                                {/foreach}
                            </tbody>
                        </table>

                        {if $pagination_prev || $pagination_next}
                            <div class="pending-pagination">
                                {if $pagination_prev}
                                <a href="{$pagination_prev}">Prev</a>
                                {/if}

                                {foreach $pagination_pages as list($page_url, $page_number, $current)}
                                <a href="{$page_url}" class="{if $current}current{/if}">{$page_number}</a>
                                {/foreach}

                                {if $pagination_next}
                                <a href="{$pagination_next}">Next</a>
                                {/if}
                            </div>
                        {/if}

                    {else}
                        <p class="no-pending-images">No pending images found.</p>
                    {/if}

                    </div>
                </div>
            </div>
        </div>
    </main>

{include file="global/footer.html"}
