{include file="global/header.html"}

    <main class="gallery-container-view">
        <div class="gallery-item-view">
            <div class="gallery-left-side">
                <div class="gallery-details-view">
                    <section>
                        {if $is_logged_in}
                        <div class="gallery-toolbar">
                            <button title="Edit Image">
                                <i class="fa-solid fa-pen-to-square"></i>
                            </button>

                            <button title="Image Views">
                                <i class="fa-solid fa-eye"></i>
                                {$img_views}
                            </button>
        
                            {if $img_has_favorited}
                            <button title="Already Favorite">
                                <i class="fa-solid fa-star"></i>
                                {$img_favorites}
                            </button>
                            {else}
                            <form method="POST" action="/image/{$img_hash}/favorite">
                                <input type="hidden" name="csrf_token" value="{$csrf_token}">
                                <button type="submit" title="Add Favorite">
                                    <i class="fa-solid fa-star"></i>
                                    {$img_favorites}
                                </button>
                            </form>
                            {/if}

                            {if $img_has_voted}
                            <button title="Already Upvoted">
                                <i class="fa-solid fa-thumbs-up"></i>
                                {$img_votes}
                            </button>
                            {else}
                            <form method="POST" action="/image/{$img_hash}/upvote">
                                <input type="hidden" name="csrf_token" value="{$csrf_token}">
                                <button type="submit" title="Up Vote">
                                    <i class="fa-solid fa-thumbs-up"></i>
                                    {$img_votes}
                                </button>
                            </form>
                            {/if}

                            <button title="Report Image">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                        </div>
                        {else}
                        <div class="gallery-toolbar">
                            <button title="Image Views">
                                <i class="fa-solid fa-eye"></i>
                                {$img_views}
                            </button>

                            <button title="Login to Favorite">
                                <i class="fa-solid fa-star"></i>
                                {$img_favorites}
                            </button>

                            <button title="Login to Upvote">
                                <i class="fa-solid fa-thumbs-up"></i>
                                {$img_votes}
                            </button>
                        </div>
                        {/if}
                    </section>

                    <section>
                        <h3>Details</h3>
                        <ul>
                            <li><strong>Image ID:</strong> {$img_hash}</li>
                            <li><strong>File Type:</strong> {$img_mime_type}</li>
                            <li><strong>Dimensions:</strong> {$img_width} Ã— {$img_height} px</li>
                            <li><strong>File Size:</strong> {$img_size}</li>
                            <li><strong>Image Status:</strong> {$img_approved_status}</li>
                            <li><strong>Uploaded By:</strong> {$img_username}</li>
                            <li><strong>Upload Date:</strong> {$img_created_at}</li>
                        </ul>
                    </section>

                    <section>
                        <h3>Hashes</h3>
                        <ul>
                            <li>
                                <strong>MD5 Hash:</strong>
                                <small>{$img_md5}</small>
                            </li>

                            <li>
                                <strong>SHA-1 Hash:</strong>
                                <small>{$img_sha1}</small>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3>Description</h3>
                        <p>{$img_description}</p>
                    </section>

                    <section>
                        <h3>View Original Image</h3>
                        <h5><a href="/image/original/{$img_hash}">View Image</a></h5>
                    </section>

                    <section>
                        <h3>Tags</h3>

                    </section>
                </div>
            </div>

            <div class="gallery-image-wrapper">
                {if $img_age_sensitive || $img_reject_reason}
                <div class="alert {$alert_color}">
                    <b>{$alert_tag}</b> {$alert_message} <a href="#">Learn more</a>
                </div>
                {/if}
                <img src="/image/original/{$img_hash}" class="gallery-image-view">
            </div>
        </div>
    </main>

    <script>
        document.querySelectorAll('.hash-tooltip-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Toggle tooltip visibility
                btn.classList.toggle('active');
            });
        });

        // Optional: click outside to hide any open tooltips
        document.addEventListener('click', (e) => {
            document.querySelectorAll('.hash-tooltip-btn.active').forEach(btn => {
                if (!btn.contains(e.target)) {
                    btn.classList.remove('active');
                }
            });
        });
    </script>

{include file="global/footer.html"}
