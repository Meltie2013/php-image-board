{include file="global/header.html"}

    <main class="gallery-container-view">
        {if $img_reject_reason}
        <div class="alert alert-danger">
            <b>Rejected! Moderator Message</b>: {$img_reject_reason}<br/>
            Please review the guidelines before making more image uploads. <a href="#">Learn more</a>
        </div>
        {/if}
        {if $img_age_sensitive}
        <div class="alert alert-warning">
            <b>Heads up!</b> This image is marked <b>sensitive</b> and may not be suitable for users under {$age_requirement}.
            <a href="#">Learn more</a>
        </div>{/if}

        <div class="gallery-item-view">
            <div class="gallery-left-side">
                {if $is_logged_in}
                <div class="gallery-toolbar">
                    <button title="Edit Image">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </button>
                    <form method="POST" action="/moderation/delete/image/{$img_hash}" 
                          onsubmit="return confirm('Are you sure you want to delete this image?');">
                        <button type="submit" title="Delete Image">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                    <button title="Add Favorite">
                        <i class="fa-solid fa-star"></i>
                    </button>
                    <button title="Up Vote">
                        <i class="fa-solid fa-thumbs-up"></i>
                    </button>
                    <button title="Report Image">
                        <i class="fa-solid fa-flag"></i>
                    </button>
                </div>                
                {/if}
                <div class="gallery-details-view">
                    <section>
                        <h3>Details</h3>
                        <ul>
                            <li><strong>Image ID:</strong> {$img_hash}</li>
                            <li><strong>File Type:</strong> {$img_mime_type}</li>
                            <li><strong>Dimensions:</strong> {$img_width} Ã— {$img_height} px</li>
                            <li><strong>File Size:</strong> {$img_size}</li>
                            <li><strong>Image Status:</strong> {$img_approved_status}</li>
                            <li><strong>Uploaded By:</strong> {$img_username}</li>
                            <li><strong>Upload Date:</strong> {$img_created_at}</li>
                        </ul>
                    </section>

                    <section>
                        <h3>Hashes</h3>
                        <ul>
                            <li>
                                <strong>MD5 Hash:</strong>
                                <button class="hash-tooltip-btn" data-hash="{$img_md5}">Show Hash</button>
                            </li>

                            <li>
                                <strong>SHA-1 Hash:</strong>
                                <button class="hash-tooltip-btn" data-hash="{$img_sha1}">Show Hash</button>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3>Description</h3>
                        <p>{$img_description}</p>
                    </section>

                    <h5><a href="/image/original/{$img_hash}">View Original Image</a></h5>

                    <section>
                        <h3>Tags</h3>

                    </section>
                </div>
            </div>

            <div class="gallery-image-wrapper">
                <img src="/image/original/{$img_hash}" class="gallery-image-view">
            </div>
        </div>
    </main>

    <script>
        document.querySelectorAll('.hash-tooltip-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Toggle tooltip visibility
                btn.classList.toggle('active');
            });
        });

        // Optional: click outside to hide any open tooltips
        document.addEventListener('click', (e) => {
            document.querySelectorAll('.hash-tooltip-btn.active').forEach(btn => {
                if (!btn.contains(e.target)) {
                    btn.classList.remove('active');
                }
            });
        });
    </script>

{include file="global/footer.html"}
